services:

    App\Infrastructure\Publication\Persistence\PublicationPersistence:
        class: 'App\Infrastructure\Publication\Persistence\PublicationPersistence'
        arguments:
            - '@App\Infrastructure\Publication\Persistence\StatusPersistence'
            - '@App\Infrastructure\Publication\Repository\PublicationRepository'
            - '@user_manager'
            - '@doctrine.orm.entity_manager'
        calls:
            - [ 'setStatusPersistence', [ '@App\Infrastructure\Publication\Persistence\StatusPersistence' ] ]
        public: true

    App\Infrastructure\Publication\Persistence\StatusPersistence:
        class: 'App\Infrastructure\Publication\Persistence\StatusPersistence'
        arguments:
            - '@repository.timely_status'
            - '@doctrine'
            - '@doctrine.orm.entity_manager'
            - '@logger'
        calls:
            - [ 'setApiAccessor',               [ '@App\Twitter\Api\Accessor' ] ]
            - [ 'setLogger',                    [ '@logger' ] ]
            - [ 'setPublishersListRepository', [ '@App\Infrastructure\Api\Repository\PublishersListRepository' ] ]
            - [ 'setPublicationPersistence',    [ '@App\Infrastructure\Publication\Persistence\PublicationPersistence' ] ]
            - [ 'setStatusLogger',              [ '@App\Infrastructure\Log\StatusLogger' ] ]
            - [ 'setStatusRepository',          [ '@App\Infrastructure\Api\Repository\StatusRepository' ] ]
            - [ 'setTaggedStatusRepository',    [ '@App\Infrastructure\Repository\Status\TaggedStatusRepository' ] ]
        public: true
